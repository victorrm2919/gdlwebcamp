function crearAdmin(){$("#password").removeClass("is-invalid").removeClass("is-valid"),$("#repetir-password").removeClass("is-invalid").removeClass("is-valid"),$("#password").parents(".form-group").removeClass("was-validate"),$("#repetir-password").parents(".form-group").removeClass("was-validate"),$("#nivel").val(null).trigger("change")}function crearEvento(){$("#categoria-evento").val(null).trigger("change"),$("#invitado").val(null).trigger("change")}function editarAdmin(t){window.location.href="1"==t?"lista-admin.php":"dashboard.php"}function crearUsuario(){$("ul#lista-producto li").remove(),$("#suma-total").text(""),$("#total_pedido").removeAttr("value"),$(".msjSeleccion").css("display","block"),$(".contenido-dia").css("display","none"),$("#regalo").val(null).trigger("change")}$(function(){$("#guardar-registro").on("submit",function(t){t.preventDefault();let r=$(this).serializeArray();console.log(r),$.ajax({type:$(this).attr("method"),url:$(this).attr("action"),data:r,dataType:"json",success:function(t){let r,o,e;console.log(t),"Nuevo"==t.registro&&(e="creo","Categoria"==t.tipo?(r="creada",o="La"):(r="creado",o="El")),"Actualizar"==t.registro&&(e="actualizo","Categoria"==t.tipo?(r="actualizada",o="La"):(r="actualizado",o="El")),"correcto"===t.respuesta?Swal.fire({icon:"success",title:`${t.tipo} ${r}`,text:`${o} ${t.tipo} se ${e} correctamente`,showConfirmButton:!1,timer:1500,onClose:()=>{"Nuevo"==t.registro&&($("#guardar-registro")[0].reset(),"Administrador"==t.tipo&&crearAdmin(),"Evento"==t.tipo&&crearEvento(),"Usuario"==t.tipo&&crearUsuario()),"Actualizar"==t.registro&&("Administrador"==t.tipo&&editarAdmin(t.nivel),"Evento"==t.tipo&&(window.location.href="lista-evento.php"),"Categoria"==t.tipo&&(window.location.href="lista-categoria.php"),"Usuario"==t.tipo&&(window.location.href="lista-registrados.php"))}}):Swal.fire({icon:"error",title:"Error!!",text:"Valida los datos del formulario",showConfirmButton:!1,timer:1500,onClose:()=>{"Nuevo"==t.registro&&"Administrador"==t.tipo&&crearAdmin()}})}})}),$("#registros tbody").on("click","a.borrar-registro",function(t){t.preventDefault(),Swal.fire({title:"¿Estás Seguro?",text:"Este proceso no se podra revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Borrar!",cancelButtonText:"Cancelar"}).then(t=>{if(t.value){let t=$(this).attr("data-id"),r=$(this).attr("data-tipo");$.ajax({type:"post",url:"modelo-"+r+".php",data:{id:t,registro:"eliminar"},dataType:"json",success:function(t){if("correcto"==t.respuesta){let r,o;"Categoria"==t.tipo?(r="eliminada",o="La"):(r="eliminado",o="El"),$('[data-id="'+t.id+'"]').parents("tr").remove(),Swal.fire({title:"Eliminado!",text:`${o} ${t.tipo} ha sido ${r} correctamente`,icon:"success",showConfirmButton:!1,timer:1500})}else Swal.fire({title:"Hubo un error!",text:"Hubo un error..",icon:"error",showConfirmButton:!1,timer:1500})}})}})}),$("#guardar-registro-archivo").on("submit",function(t){t.preventDefault();let r=new FormData(this);$.ajax({type:$(this).attr("method"),url:$(this).attr("action"),data:r,dataType:"json",contentType:!1,processData:!1,async:!0,cache:!1,success:function(t){"correcto"===t.respuesta?Swal.fire({icon:"success",title:`${t.tipo} guardado`,text:`El ${t.tipo} se guardo correctamente`,showConfirmButton:!1,timer:1500,timerProgressBar:!0,onClose:()=>{"Nuevo"==t.registro&&$("#guardar-registro-archivo")[0].reset(),"Actualizar"==t.registro&&(window.location.href="lista-invitados.php")}}):Swal.fire({icon:"error",title:"Hubo un error",text:"Valida los datos del formulario",timer:1500,timerProgressBar:!0})}})})});